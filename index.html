<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulário para Visto Americano</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f2f5;
            color: #333;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            box-sizing: border-box;
        }
        .container {
            background-color: #ffffff;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
            max-width: 850px;
            width: 100%;
            margin: 20px 0;
            box-sizing: border-box;
        }
        h1 {
            color: #003087;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.4em;
            font-weight: 700;
        }
        h3 {
            color: #0056b3;
            border-bottom: 3px solid #007bff;
            padding-bottom: 10px;
            margin-top: 35px;
            margin-bottom: 25px;
            font-size: 1.8em;
        }
        h4 {
            color: #007bff;
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 1.4em;
        }
        label {
            display: block;
            margin: 18px 0 8px;
            font-weight: 600;
            color: #444;
            font-size: 0.98em;
        }
        input[type="text"],
        input[type="date"],
        input[type="tel"],
        input[type="email"],
        textarea,
        select {
            width: 100%;
            padding: 12px;
            margin-bottom: 18px;
            border: 1px solid #ccc;
            border-radius: 8px;
            font-size: 1em;
            box-sizing: border-box;
        }
        input:focus, textarea:focus, select:focus {
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.25);
            outline: none;
        }
        textarea {
            resize: vertical;
            min-height: 80px;
        }
        button[type="submit"] {
            background-color: #28a745;
            color: white;
            padding: 15px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.15em;
            font-weight: 600;
            width: 100%;
            margin-top: 40px;
        }
        button[type="submit"]:hover {
            background-color: #218838;
            transform: translateY(-2px);
        }
        hr {
            border: 0;
            border-top: 2px dashed #e0e0e0;
            margin: 40px 0;
        }
        .hidden-section {
            display: none;
        }
        .conditional-section {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin: 25px 0;
        }
        .declaration-section {
            background-color: #e6f7ff;
            border: 1px solid #99d6ff;
            border-radius: 10px;
            padding: 30px;
            margin-top: 50px;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.05);
        }
        .declaration-section ol {
            padding-left: 28px;
            margin-bottom: 20px;
            font-size: 0.95em;
            color: #444;
        }
        .declaration-section ol li {
            margin-bottom: 10px;
            line-height: 1.5;
        }
        .declaration-section p {
            margin-bottom: 10px;
            font-size: 0.98em;
            color: #333;
        }
        .declaration-section strong {
            color: #0056b3;
        }
        .declaration-section input[type="text"][name="declaracaoNome"],
        .declaration-section input[type="text"][name="declaracaoLocal"],
        .declaration-section input[type="date"][name="declaracaoData"] {
            width: auto;
            display: inline-block;
            padding: 8px;
            font-size: 0.9em;
            border-radius: 5px;
            margin-left: 5px;
        }
        .error-msg {
            color: #d9534f;
            font-size: 0.9em;
            margin-top: -10px;
            margin-bottom: 10px;
        }
        @media (max-width: 768px) {
            .container { padding: 20px; }
            h1 { font-size: 1.8em; }
            h3 { font-size: 1.5em; }
            input, textarea, select { padding: 10px; }
        }
        @media (max-width: 480px) {
            .container { padding: 15px; }
            h1 { font-size: 1.6em; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Formulário para Visto Americano</h1>
        <p>Preencha os dados abaixo. Ao clicar em "Enviar", um PDF detalhado será gerado, baixado automaticamente e uma mensagem será enviada ao WhatsApp com os dados básicos e um link para o PDF.</p>
        <form id="visaForm" name="visaForm" method="POST">
            <h3>Informações Pessoais</h3>
            <label for="nome">Nome completo (como no passaporte):</label>
            <input type="text" id="nome" name="nome">

            <label for="sobrenome">Sobrenome (como no passaporte):</label>
            <input type="text" id="sobrenome" name="sobrenome">

            <label for="outrosNomes">Já usou outros nomes? (ex.: nome de solteiro, apelido):</label>
            <input type="text" id="outrosNomes" name="outrosNomes">

            <label for="cpf">CPF:</label>
            <input type="text" id="cpf" name="cpf" maxlength="14" oninput="formatCPF(this)">

            <label for="nascimento">Data de nascimento:</label>
            <input type="date" id="nascimento" name="nascimento">

            <label for="localNascimento">Cidade e país de nascimento:</label>
            <input type="text" id="localNascimento" name="localNascimento">

            <label for="sexo">Sexo:</label>
            <select id="sexo" name="sexo">
                <option value="">Selecione</option>
                <option value="Masculino">Masculino</option>
                <option value="Feminino">Feminino</option>
                <option value="Outro">Outro</option>
            </select>
            <label for="estadoCivil">Estado civil:</label>
            <select id="estadoCivil" name="estadoCivil">
                <option value="">Selecione</option>
                <option value="Solteiro">Solteiro</option>
                <option value="Casado">Casado</option>
                <option value="Divorciado">Divorciado</option>
                <option value="Viúvo">Viúvo</option>
                <option value="União Estável">União Estável</option>
            </select>
            <div id="spouseInfo" class="conditional-section hidden-section">
                <h4>Dados do Cônjuge</h4>
                <label for="spouseNome">Nome completo do cônjuge:</label>
                <input type="text" id="spouseNome" name="spouseNome">
                <label for="spouseNascimento">Data de nascimento do cônjuge:</label>
                <input type="date" id="spouseNascimento" name="spouseNascimento">
                <label for="spouseLocalNascimento">Cidade e país de nascimento do cônjuge:</label>
                <input type="text" id="spouseLocalNascimento" name="spouseLocalNascimento">
                <div id="spouseDeathInfo" class="conditional-section hidden-section">
                    <label for="spouseFalecimento">Data de falecimento do cônjuge:</label>
                    <input type="date" id="spouseFalecimento" name="spouseFalecimento">
                </div>
            </div>
            <hr>
            <label for="nacionalidade">Nacionalidade atual:</label>
            <input type="text" id="nacionalidade" name="nacionalidade">
            <label for="outrasNacionalidades">Possui outras nacionalidades? (Se sim, quais?):</label>
            <input type="text" id="outrasNacionalidades" name="outrasNacionalidades">
            <label for="passaporte">Número do passaporte:</label>
            <input type="text" id="passaporte" name="passaporte">
            <label for="dataEmissaoPassaporte">Data de emissão do passaporte:</label>
            <input type="date" id="dataEmissaoPassaporte" name="dataEmissaoPassaporte">
            <label for="dataValidadePassaporte">Data de validade do passaporte:</label>
            <input type="date" id="dataValidadePassaporte" name="dataValidadePassaporte">
            <label for="localEmissaoPassaporte">Local de emissão do passaporte:</label>
            <input type="text" id="localEmissaoPassaporte" name="localEmissaoPassaporte">
            <h3>Informações de Contato</h3>
            <label for="cep">CEP (ex.: 70.340-902):</label>
            <input type="text" id="cep" name="cep" maxlength="10" oninput="formatCEP(this)" onblur="buscarCEP(this, 'endereco', 'cidade', 'estado', 'pais')">
            <div id="cep-error" class="error-msg"></div>
            <label for="endereco">Endereço completo (rua, número, bairro):</label>
            <textarea id="endereco" name="endereco"></textarea>
            <label for="cidade">Cidade:</label>
            <input type="text" id="cidade" name="cidade">
            <label for="estado">Estado/Província:</label>
            <input type="text" id="estado" name="estado">
            <label for="pais">País:</label>
            <input type="text" id="pais" name="pais">
            <label for="telefone">Número de telefone (com código do país):</label>
            <input type="tel" id="telefone" name="telefone">
            <label for="email">E-mail:</label>
            <input type="email" id="email" name="email">
            <h3>Informações Familiares</h3>
            <label for="temPaisVivos">Seus pais estão vivos?</label>
            <select id="temPaisVivos" name="temPaisVivos">
                <option value="">Selecione</option>
                <option value="Sim">Sim</option>
                <option value="Não">Não</option>
            </select>
            <div id="parentsInfo" class="conditional-section hidden-section">
                <label for="nomePai">Nome completo do pai:</label>
                <input type="text" id="nomePai" name="nomePai">
                <label for="nascimentoPai">Data de nascimento do pai:</label>
                <input type="date" id="nascimentoPai" name="nascimentoPai">
                <label for="nomeMae">Nome completo da mãe:</label>
                <input type="text" id="nomeMae" name="nomeMae">
                <label for="nascimentoMae">Data de nascimento da mãe:</label>
                <input type="date" id="nascimentoMae" name="nascimentoMae">
                <label for="paisNosEUA">Seus pais estão nos EUA?</label>
                <select id="paisNosEUA" name="paisNosEUA">
                    <option value="">Selecione</option>
                    <option value="Sim">Sim</option>
                    <option value="Não">Não</option>
                </select>
                <div id="parentsInUSInfo" class="conditional-section hidden-section">
                    <label for="explicacaoPaisEUA">Explique a situação dos seus pais nos EUA:</label>
                    <textarea id="explicacaoPaisEUA" name="explicacaoPaisEUA"></textarea>
                </div>
            </div>
            <label for="temConhecidosEUA">Tem conhecidos nos EUA?</label>
            <select id="temConhecidosEUA" name="temConhecidosEUA">
                <option value="">Selecione</option>
                <option value="Sim">Sim</option>
                <option value="Não">Não</option>
            </select>
            <div id="acquaintancesInfo" class="conditional-section hidden-section">
                <h4>Dados do Conhecido nos EUA</h4>
                <label for="nomeConhecido">Nome completo do conhecido:</label>
                <input type="text" id="nomeConhecido" name="nomeConhecido">
                <label for="telefoneConhecido">Telefone do conhecido (com código do país):</label>
                <input type="tel" id="telefoneConhecido" name="telefoneConhecido">
                <label for="emailConhecido">E-mail do conhecido:</label>
                <input type="email" id="emailConhecido" name="emailConhecido">
                <label for="vinculoConhecido">Vínculo com o solicitante (ex.: amigo, parente):</label>
                <input type="text" id="vinculoConhecido" name="vinculoConhecido">
            </div>
            <h3>Detalhes da Viagem</h3>
            <label for="objetivo">Objetivo da viagem aos EUA:</label>
            <select id="objetivo" name="objetivo">
                <option value="">Selecione</option>
                <option value="Turismo">Turismo</option>
                <option value="Negócios">Negócios</option>
                <option value="Estudo">Estudo</option>
                <option value="Trabalho">Trabalho</option>
                <option value="Visita a Familiares">Visita a Familiares</option>
                <option value="Outro">Outro</option>
            </select>
            <label for="chegada">Data prevista de chegada aos EUA:</label>
            <input type="date" id="chegada" name="chegada">
            <label for="tempo">Quanto tempo pretende ficar nos EUA? (ex.: 2 semanas, 6 meses):</label>
            <input type="text" id="tempo" name="tempo">
            <label for="enderecoEUA">Endereço onde ficará nos EUA (rua, cidade, estado, CEP):</label>
            <textarea id="enderecoEUA" name="enderecoEUA" placeholder="Digite o endereço, se disponível (Não obrigatório)"></textarea>
            <label for="quemPaga">Quem está pagando pela viagem?</label>
            <select id="quemPaga" name="quemPaga">
                <option value="">Selecione</option>
                <option value="Eu mesmo">Eu mesmo</option>
                <option value="Outra pessoa">Outra pessoa</option>
            </select>
            <div id="payerInfo" class="conditional-section hidden-section">
                <h4>Dados da Pessoa Pagante</h4>
                <label for="payerNome">Nome completo da pessoa pagante:</label>
                <input type="text" id="payerNome" name="payerNome">
                <label for="payerSameAddress">O endereço é o mesmo do solicitante?</label>
                <select id="payerSameAddress" name="payerSameAddress">
                    <option value="">Selecione</option>
                    <option value="Sim">Sim</option>
                    <option value="Não">Não</option>
                </select>
                <div id="payerAddressInfo" class="conditional-section hidden-section">
                    <label for="payerCEP">CEP (ex.: 70.340-902):</label>
                    <input type="text" id="payerCEP" name="payerCEP" maxlength="10" oninput="formatCEP(this)" onblur="buscarCEP(this, 'payerEndereco', 'payerCidade', 'payerEstado', 'payerPais')">
                    <div id="payerCEP-error" class="error-msg"></div>
                    <label for="payerEndereco">Endereço completo (rua, número, bairro):</label>
                    <textarea id="payerEndereco" name="payerEndereco"></textarea>
                    <label for="payerCidade">Cidade:</label>
                    <input type="text" id="payerCidade" name="payerCidade">
                    <label for="payerEstado">Estado/Província:</label>
                    <input type="text" id="payerEstado" name="payerEstado">
                    <label for="payerPais">País:</label>
                    <input type="text" id="payerPais" name="payerPais">
                </div>
                <label for="payerEmail">E-mail da pessoa pagante:</label>
                <input type="email" id="payerEmail" name="payerEmail">
                <label for="payerTelefone">Telefone da pessoa pagante (com código do país):</label>
                <input type="tel" id="payerTelefone" name="payerTelefone">
                <label for="payerVinculo">Vínculo com o solicitante (ex.: pai, amigo, empregador):</label>
                <input type="text" id="payerVinculo" name="payerVinculo">
            </div>
            <label for="temCompanheiros">Vai viajar com alguém?</label>
            <select id="temCompanheiros" name="temCompanheiros">
                <option value="">Selecione</option>
                <option value="Sim">Sim</option>
                <option value="Não">Não</option>
            </select>
            <div id="travelCompanionsInfo" class="conditional-section hidden-section">
                <label for="nomeCompanheiro">Nome completo do(s) companheiro(s) de viagem:</label>
                <textarea id="nomeCompanheiro" name="nomeCompanheiro"></textarea>
                <label for="relacaoCompanheiro">Relação com o(s) companheiro(s) (ex.: amigo, colega):</label>
                <input type="text" id="relacaoCompanheiro" name="relacaoCompanheiro">
            </div>
            <h3>Informações de Trabalho</h3>
            <label for="ocupacao">Ocupação atual:</label>
            <input type="text" id="ocupacao" name="ocupacao">
            <label for="empregador">Nome do empregador:</label>
            <input type="text" id="empregador" name="empregador">
            <label for="enderecoEmpregador">Endereço do empregador:</label>
            <textarea id="enderecoEmpregador" name="enderecoEmpregador"></textarea>
            <label for="telefoneEmpregador">Telefone do empregador:</label>
            <input type="tel" id="telefoneEmpregador" name="telefoneEmpregador">
            <label for="dataInicioTrabalho">Data de início no emprego:</label>
            <input type="date" id="dataInicioTrabalho" name="dataInicioTrabalho">
            <label for="rendaMensal">Renda mensal (em reais):</label>
            <input type="text" id="rendaMensal" name="rendaMensal">
            <h3>Informações de Educação</h3>
            <label for="nivelEducacao">Nível mais alto de educação concluído:</label>
            <select id="nivelEducacao" name="nivelEducacao">
                <option value="">Selecione</option>
                <option value="Ensino Fundamental">Ensino Fundamental</option>
                <option value="Ensino Médio">Ensino Médio</option>
                <option value="Ensino Superior">Ensino Superior</option>
                <option value="Pós-Graduação">Pós-Graduação</option>
            </select>
            <label for="curso">Nome do curso:</label>
            <input type="text" id="curso" name="curso">
            <label for="instituicao">Nome da instituição educacional:</label>
            <input type="text" id="instituicao" name="instituicao">
            <label for="cepInstituicao">CEP da instituição:</label>
            <input type="text" id="cepInstituicao" name="cepInstituicao" maxlength="10" oninput="formatCEP(this)" onblur="buscarCEP(this, 'enderecoInstituicao')">
            <div id="cepInstituicao-error" class="error-msg"></div>
            <label for="enderecoInstituicao">Endereço da instituição:</label>
            <textarea id="enderecoInstituicao" name="enderecoInstituicao"></textarea>
            <label for="dataInicioEducacao">Data de início do curso:</label>
            <input type="date" id="dataInicioEducacao" name="dataInicioEducacao">
            <label for="dataFimEducacao">Data de conclusão do curso:</label>
            <input type="date" id="dataFimEducacao" name="dataFimEducacao">
            <h3>Histórico de Viagens</h3>
            <label for="primeiroVisto">É o seu primeiro visto ou uma renovação?</label>
            <select id="primeiroVisto" name="primeiroVisto">
                <option value="">Selecione</option>
                <option value="Primeiro visto">Primeiro visto</option>
                <option value="Renovação">Renovação</option>
            </select>
            <div id="renewalInfo" class="conditional-section hidden-section">
                <label for="numeroVistoAnteriorRenovacao">Número do visto anterior:</label>
                <input type="text" id="numeroVistoAnteriorRenovacao" name="numeroVistoAnteriorRenovacao">
                <label for="dataEmissaoVistoAnterior">Data de emissão do visto anterior:</label>
                <input type="date" id="dataEmissaoVistoAnterior" name="dataEmissaoVistoAnterior">
                <label for="dataValidadeVistoAnterior">Data de validade do visto anterior:</label>
                <input type="date" id="dataValidadeVistoAnterior" name="dataValidadeVistoAnterior">
                <label for="localEmissaoVistoAnterior">Local de emissão do visto anterior:</label>
                <input type="text" id="localEmissaoVistoAnterior" name="localEmissaoVistoAnterior">
            </div>
            <label for="visitouEUA">Já visitou os EUA antes?</label>
            <select id="visitouEUA" name="visitouEUA">
                <option value="">Selecione</option>
                <option value="Sim">Sim</option>
                <option value="Não">Não</option>
            </select>
            <label for="impressaoDigital">Já teve impressão digital dos dedos coletada?</label>
            <select id="impressaoDigital" name="impressaoDigital">
                <option value="">Selecione</option>
                <option value="Sim">Sim</option>
                <option value="Não">Não</option>
            </select>
            <div id="previousUSVisaInfo" class="conditional-section hidden-section">
                <label for="dataUltimaVisita">Data da última visita aos EUA:</label>
                <input type="date" id="dataUltimaVisita" name="dataUltimaVisita">
                <label for="tempoUltimaVisita">Tempo de estadia na última visita:</label>
                <input type="text" id="tempoUltimaVisita" name="tempoUltimaVisita">
                <label for="numeroVistoAnterior">Número do visto anterior (se aplicável):</label>
                <input type="text" id="numeroVistoAnterior" name="numeroVistoAnterior">
            </div>
            <label for="outrosPaises">Países visitados nos últimos 5 anos:</label>
            <textarea id="outrosPaises" name="outrosPaises"></textarea>
            <label for="vistoNegado">Já teve um visto americano negado?</label>
            <select id="vistoNegado" name="vistoNegado">
                <option value="">Selecione</option>
                <option value="Sim">Sim</option>
                <option value="Não">Não</option>
            </select>
            <label for="entradaRecusada">Já foi negada admissão aos EUA ou teve entrada recusada?</label>
            <select id="entradaRecusada" name="entradaRecusada">
                <option value="">Selecione</option>
                <option value="Sim">Sim</option>
                <option value="Não">Não</option>
            </select>
            <div id="visaDeniedDetails" class="conditional-section hidden-section">
                <label for="detalhesVistoNegado">Detalhes da negativa (data e motivo):</label>
                <textarea id="detalhesVistoNegado" name="detalhesVistoNegado"></textarea>
            </div>
            <div class="declaration-section">
                <h3>Declaração</h3>
                <p>Eu, <input type="text" id="declaracaoNome" name="declaracaoNome" placeholder="Nome completo" required> declaro, sob as penas da lei, que li e compreendi integralmente todas as questões contidas nesta solicitação de visto e afirmo que as respostas por mim fornecidas são verdadeiras, completas e corretas, conforme o meu melhor conhecimento e convicção.</p>
                <p><strong>Declaro estar ciente de que:</strong></p>
                <ol>
                    <li>Qualquer declaração falsa, incompleta ou enganosa poderá resultar na recusa permanente do visto ou na negativa de admissão nos Estados Unidos, conforme disposto na legislação aplicável.</li>
                    <li>Todas as informações prestadas nesta solicitação constituem declarações juramentadas, realizadas sob pena de perjúrio, nos termos do disposto no <em>28 U.S.C. § 1746</em>.</li>
                    <li>Informações adicionais poderão ser requisitadas pelas autoridades competentes após a análise desta solicitação, sendo minha responsabilidade fornecê-las tempestivamente.</li>
                    <li>As informações contidas nesta solicitação poderão ser compartilhadas com outras agências governamentais dos Estados Unidos, que possuem autoridade para utilizá-las para fins de aplicação da lei ou para propósitos imigratórios, conforme permitido pela legislação vigente.</li>
                    <li>A fotografia fornecida com esta solicitação poderá ser utilizada pelas autoridades americanas para fins de verificação de identidade, empregabilidade ou outros objetivos legais previstos na legislação dos Estados Unidos.</li>
                </ol>
                <p><strong>Declaro ainda:</strong></p>
                <ol start="6">
                    <li>Que sou exclusivamente responsável pela autenticidade e exatidão dos documentos apresentados e das informações prestadas nesta solicitação.</li>
                    <li>Que tenho pleno conhecimento de que a concessão ou negativa do visto é prerrogativa exclusiva da Autoridade Consular Americana, não cabendo a terceiros qualquer ingerência sobre tal decisão.</li>
                    <li>Que estou ciente de que, em processos de renovação de visto, entrevistas presenciais poderão ser exigidas a critério exclusivo da Autoridade Consular Americana.</li>
                    <li>Que reconheço que o serviço contratado constitui assessoria relacionada ao processo de preenchimento de documentação, agendamento de biometria e entrevista, não abrangendo serviços de entrega ou retirada de documentos no Centro de Atendimento ao Solicitante de Visto (CASV), sendo necessária a contratação de um agente colaborador, caso eu deseje tais serviços adicionais.</li>
                    <li>Que a aposição de minha assinatura eletrônica neste documento possui validade jurídica, conforme a legislação aplicável, e representa meu reconhecimento expresso dos serviços contratados.</li>
                </ol>
                <p><strong>Autorização:</strong></p>
                <p>Declaro, por fim, ter revisado e conferido todos os dados por mim apresentados, autorizando expressamente a empresa **Objetivo Turismo Ltda.**, contratada diretamente por mim ou por intermédio de minha agência, a proceder com o envio eletrônico do Formulário DS-160 ao Consulado Americano, bem como a realizar o pagamento das taxas e o agendamento necessários à tramitação do meu pedido de visto.</p>
                <label for="declaracaoLocal">Local:</label>
                <input type="text" id="declaracaoLocal" name="declaracaoLocal" required>
                <label for="declaracaoData">Data:</label>
                <input type="date" id="declaracaoData" name="declaracaoData" required>
                <label>Concordo com os termos desta declaração <input type="checkbox" id="aceiteDeclaracao" name="aceiteDeclaracao" required style="width: auto; margin-left: 10px;"></label>
            </div>
            <button type="submit">Enviar Formulário</button>
        </form>
    </div>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.5.0/firebase-app.js";
        import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/11.5.0/firebase-storage.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAkBV0rHEghBOHl2mDOs6rMDHkUgYMxFr0",
            authDomain: "visaformulariostorage.firebaseapp.com",
            projectId: "visaformulariostorage",
            storageBucket: "visaformulariostorage.firebasestorage.app",
            messagingSenderId: "720170394408",
            appId: "1:720170394408:web:b1c294c39c489388f6261d",
            measurementId: "G-ZFCV4JEEFT"
        };
        const app = initializeApp(firebaseConfig);
        const storage = getStorage(app);

        function formatCPF(input) {
            let value = input.value.replace(/\D/g, '');
            if (value.length > 11) value = value.slice(0, 11);
            value = value.replace(/(\d{3})(\d)/, '$1.$2');
            value = value.replace(/(\d{3})(\d)/, '$1.$2');
            value = value.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
            input.value = value;
        }
        function formatCEP(input) {
            let value = input.value.replace(/\D/g, '');
            if (value.length > 8) value = value.slice(0, 8);
            if (value.length > 5) {
                value = value.replace(/(\d{2})(\d{3})(\d{3})/, '$1.$2-$3');
            } else if (value.length > 2) {
                value = value.replace(/(\d{2})(\d+)/, '$1.$2');
            }
            input.value = value;
        }
        function formatDateBr(dateStr) {
            if (!dateStr) return 'Não informado';
            const [year, month, day] = dateStr.split('-');
            const date = new Date(year, month - 1, day);
            return date.toLocaleDateString('pt-BR', { timeZone: 'America/Sao_Paulo' });
        }
        async function buscarCEP(input, enderecoId, cidadeId = null, estadoId = null, paisId = null) {
            const cep = input.value.replace(/\D/g, '');
            const errorId = input.id + '-error';
            const errorElem = document.getElementById(errorId);
            if (errorElem) errorElem.textContent = '';
            if (cep.length !== 8) return;
            try {
                const response = await fetch(`https://viacep.com.br/ws/${cep}/json/`);
                const data = await response.json();
                if (data.erro) throw new Error('CEP não encontrado');
                const enderecoElem = document.getElementById(enderecoId);
                if (enderecoElem) {
                    let addr = data.logradouro || '';
                    if (data.complemento) addr += `, ${data.complemento}`;
                    if (data.bairro) addr += `, ${data.bairro}`;
                    enderecoElem.value = addr.trim() || enderecoElem.value;
                }
                if (cidadeId) document.getElementById(cidadeId).value = data.localidade || '';
                if (estadoId) document.getElementById(estadoId).value = data.uf || '';
                if (paisId) document.getElementById(paisId).value = 'Brasil';
            } catch (error) {
                if (errorElem) errorElem.textContent = 'CEP inválido ou não encontrado. Por favor, verifique.';
            }
        }
        function toggleSpouseInfo() {
            const estadoCivil = document.getElementById('estadoCivil').value;
            const spouseInfo = document.getElementById('spouseInfo');
            const spouseDeathInfo = document.getElementById('spouseDeathInfo');
            if (['Casado', 'Divorciado', 'Viúvo', 'União Estável'].includes(estadoCivil)) {
                spouseInfo.classList.remove('hidden-section');
                if (estadoCivil === 'Viúvo') {
                    spouseDeathInfo.classList.remove('hidden-section');
                } else {
                    spouseDeathInfo.classList.add('hidden-section');
                    spouseDeathInfo.querySelectorAll('input').forEach(el => el.value = '');
                }
            } else {
                spouseInfo.classList.add('hidden-section');
                spouseDeathInfo.classList.add('hidden-section');
                spouseInfo.querySelectorAll('input, textarea, select').forEach(el => el.value = '');
            }
        }
        function toggleParentsInfo() {
            const temPaisVivos = document.getElementById('temPaisVivos').value;
            const parentsInfo = document.getElementById('parentsInfo');
            if (temPaisVivos === 'Sim') {
                parentsInfo.classList.remove('hidden-section');
            } else {
                parentsInfo.classList.add('hidden-section');
                parentsInfo.querySelectorAll('input, textarea, select').forEach(el => el.value = '');
                document.getElementById('parentsInUSInfo').classList.add('hidden-section');
            }
            toggleParentsInUSInfo();
        }
        function toggleParentsInUSInfo() {
            const paisNosEUA = document.getElementById('paisNosEUA').value;
            const parentsInUSInfo = document.getElementById('parentsInUSInfo');
            if (paisNosEUA === 'Sim') {
                parentsInUSInfo.classList.remove('hidden-section');
            } else {
                parentsInUSInfo.classList.add('hidden-section');
                parentsInUSInfo.querySelectorAll('input, textarea, select').forEach(el => el.value = '');
            }
        }
        function toggleAcquaintancesInfo() {
            const temConhecidosEUA = document.getElementById('temConhecidosEUA').value;
            const acquaintancesInfo = document.getElementById('acquaintancesInfo');
            if (temConhecidosEUA === 'Sim') {
                acquaintancesInfo.classList.remove('hidden-section');
            } else {
                acquaintancesInfo.classList.add('hidden-section');
                acquaintancesInfo.querySelectorAll('input, textarea, select').forEach(el => el.value = '');
            }
        }
        function togglePayerInfo() {
            const quemPaga = document.getElementById('quemPaga').value;
            const payerInfo = document.getElementById('payerInfo');
            if (quemPaga === 'Outra pessoa') {
                payerInfo.classList.remove('hidden-section');
            } else {
                payerInfo.classList.add('hidden-section');
                payerInfo.querySelectorAll('input, textarea, select').forEach(el => el.value = '');
                document.getElementById('payerAddressInfo').classList.add('hidden-section');
            }
            togglePayerAddressInfo();
        }
        function togglePayerAddressInfo() {
            const payerSameAddress = document.getElementById('payerSameAddress').value;
            const payerAddressInfo = document.getElementById('payerAddressInfo');
            if (payerSameAddress === 'Não') {
                payerAddressInfo.classList.remove('hidden-section');
            } else {
                payerAddressInfo.classList.add('hidden-section');
                payerAddressInfo.querySelectorAll('input, textarea, select').forEach(el => el.value = '');
            }
        }
        function toggleTravelCompanionsInfo() {
            const temCompanheiros = document.getElementById('temCompanheiros').value;
            const travelCompanionsInfo = document.getElementById('travelCompanionsInfo');
            if (temCompanheiros === 'Sim') {
                travelCompanionsInfo.classList.remove('hidden-section');
            } else {
                travelCompanionsInfo.classList.add('hidden-section');
                travelCompanionsInfo.querySelectorAll('input, textarea, select').forEach(el => el.value = '');
            }
        }
        function toggleRenewalInfo() {
            const primeiroVisto = document.getElementById('primeiroVisto').value;
            const renewalInfo = document.getElementById('renewalInfo');
            if (primeiroVisto === 'Renovação') {
                renewalInfo.classList.remove('hidden-section');
            } else {
                renewalInfo.classList.add('hidden-section');
                renewalInfo.querySelectorAll('input, textarea, select').forEach(el => el.value = '');
            }
        }
        function togglePreviousUSVisaInfo() {
            const visitouEUA = document.getElementById('visitouEUA').value;
            const previousUSVisaInfo = document.getElementById('previousUSVisaInfo');
            if (visitouEUA === 'Sim') {
                previousUSVisaInfo.classList.remove('hidden-section');
            } else {
                previousUSVisaInfo.classList.add('hidden-section');
                previousUSVisaInfo.querySelectorAll('input, textarea, select').forEach(el => el.value = '');
            }
        }
        function toggleVisaDeniedDetails() {
            const vistoNegado = document.getElementById('vistoNegado').value;
            const entradaRecusada = document.getElementById('entradaRecusada').value;
            const visaDeniedDetails = document.getElementById('visaDeniedDetails');
            if (vistoNegado === 'Sim' || entradaRecusada === 'Sim') {
                visaDeniedDetails.classList.remove('hidden-section');
            } else {
                visaDeniedDetails.classList.add('hidden-section');
                visaDeniedDetails.querySelectorAll('input, textarea, select').forEach(el => el.value = '');
            }
        }
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('estadoCivil').addEventListener('change', toggleSpouseInfo);
            document.getElementById('temPaisVivos').addEventListener('change', toggleParentsInfo);
            document.getElementById('paisNosEUA').addEventListener('change', toggleParentsInUSInfo);
            document.getElementById('temConhecidosEUA').addEventListener('change', toggleAcquaintancesInfo);
            document.getElementById('quemPaga').addEventListener('change', togglePayerInfo);
            document.getElementById('payerSameAddress').addEventListener('change', togglePayerAddressInfo);
            document.getElementById('temCompanheiros').addEventListener('change', toggleTravelCompanionsInfo);
            document.getElementById('primeiroVisto').addEventListener('change', toggleRenewalInfo);
            document.getElementById('visitouEUA').addEventListener('change', togglePreviousUSVisaInfo);
            document.getElementById('vistoNegado').addEventListener('change', toggleVisaDeniedDetails);
            document.getElementById('entradaRecusada').addEventListener('change', toggleVisaDeniedDetails);
            document.getElementById('visaForm').addEvent
